{"version":"1012000","info":{"hostAppName":"Maya","hostAppVersion":"2014 x64"},"nodes":[{"name":"DGNode","members":[{"name":"result","type":"Vec3","persistence":true,"default":"{\"x\":0,\"y\":0,\"z\":0}"},{"name":"x","type":"Scalar","persistence":true,"default":"40"},{"name":"y","type":"Scalar","persistence":true,"default":"3"}],"dependencies":{},"bindings":[{"operator":{"name":"textureDrawOp","entry":"textureDrawOp","filename":"textureDrawOp.kl","kl":"require Math;\nrequire InlineDrawing;\n\noperator textureDrawOp(io Vec3 result, in Scalar x, in Scalar y) {\n\n  InlineDrawing draw = OGLInlineDrawing_GetInstance();\n  draw.reset();\n  \n  InlineShader shader = draw.registerShader(OGLFlatTextureShader());\n  InlineMaterial mat = shader.getOrCreateMaterial('mat');\n  \n  Size width = 512;\n  Color pixels[];\n  pixels.resize(width * width);\n  \n  for(Size i=0;i<pixels.size();i++) {\n    Scalar xc = Scalar(i % width) / Scalar(width);\n    Scalar yc = Scalar(i / width) / Scalar(width);\n    pixels[i].r = 0.5 + 0.5 * sin(xc * x);\n    pixels[i].g = 0.5 + 0.5 * sin(yc * y);\n    pixels[i].a = 1.0;\n  }\n  \n  InlineProceduralTexture texture = draw.registerTexture(InlineProceduralTexture('sinusbased'));\n  texture.update(width, width, pixels);\n  \n  mat.setUniform('u_texture', texture);\n  \n  PolygonMesh plane = PolygonMesh();\n  plane.addPlane(Xfo(), 10, 10, 3, 3, true, true);\n  InlineShape shape = draw.registerShape(InlineMeshShape('plane', plane));\n  \n  mat.addInstance(SimpleInlineInstance('plane', draw.getRoot(), shape));\n}\n","portmap":{}}}]}],"extensions":[],"ports":[{"name":"result","node":"DGNode","graph":"mayaGraph","type":"Vec3","autoInitObjects":true,"member":"result","mode":"io"},{"name":"x","node":"DGNode","graph":"mayaGraph","type":"Scalar","autoInitObjects":true,"member":"x","mode":"in"},{"name":"y","node":"DGNode","graph":"mayaGraph","type":"Scalar","autoInitObjects":true,"member":"y","mode":"in"}]}